<div class="bg-white-light p-6 rounded-2x">
  <h2 class="text-xl font-medium text-black-dark mb-4">Formas de Pagamento</h2>

  <div>
    <app-pickup-option
      [selectedDelivery]="selectedDelivery()"
      (selectedDeliveryChange)="selectedDelivery.set($event)"
      [value]="true"
      text="Cartão"
    />

    <app-pickup-option
      [selectedDelivery]="selectedDelivery()"
      (selectedDeliveryChange)="selectedDelivery.set($event)"
      [value]="false"
      text="Pix"
    />
    <div>
      @if(!selectedDelivery()) {
      <div class="mt-4 flex flex-col items-center">
        <p class="text-center text-gray-700 mb-2">
          Escaneie o QR Code para pagar
        </p>

        <img
          src="assets/images/qr_code.png"
          alt="QR Code PIX"
          class="w-32 h-32 border border-gray-300 rounded-lg shadow-md"
        />
        <button class="flex items-center gap-2">
          <span>Copiar</span>
          <i class="fa-solid fa-copy"></i>
        </button>
      </div>
      }
    </div>
  </div>
  <p class="text-lg font-medium text-black-light mt-4">
    Total: @if(this.loadingAddress()) {
    <app-loading />
    } @else {
    <span class="text-green-500">{{ total | currency : "BRL" }}</span>

    }
  </p>

  <div class="flex gap-3 mt-4">
    <button
      class="text-gray-600 bg-gray-200 rounded-md w-1/2"
      (click)="backToPaymentAddress()"
    >
      Voltar
    </button>
    <button
      [matTooltip]="!selectedDelivery() ? 'Faça o pagamento via Pix' : ''"
      (click)="onConfirm()"
      [disabled]="loadingService.loading() || !selectedDelivery()"
      class="button-primary text-text4 w-1/2 flex items-center gap-2 justify-center"
    >
      Confirmar @if(loadingService.loading()) {
      <app-loading />
      }
    </button>
  </div>
</div>

@if(loadingService.loading()) {
<app-loading-screen />
}
